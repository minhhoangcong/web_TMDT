<div class="app-fixed">
        <ul class="app-fixed-menu">
          <li class="app-fixed-list active">
            <a href="index.php" class="app-fixed-link">
              <i class="fa fa-home" aria-hidden="true"></i>
            </a>
          </li>
          <li class="app-fixed-list">
            <a href="index.php?pg=product" class="app-fixed-link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="35"
                height="28"
                viewBox="0 0 35 28"
                fill="none">
                <path
                  d="M25 14C25 16.7614 22.7614 19 20 19C17.2386 19 15 16.7614 15 14C15 11.2386 17.2386 9 20 9C22.7614 9 25 11.2386 25 14Z"
                  fill="white" />
                <circle cx="20" cy="14" r="5" fill="#46694F" />
                <path
                  d="M34.5175 5.27734L23.8712 0C22.7722 1.52031 20.3389 2.58125 17.501 2.58125C14.6631 2.58125 12.2298 1.52031 11.1307 0L0.48448 5.27734C0.0525059 5.49609 -0.122471 6.02109 0.090782 6.45312L3.21849 12.7148C3.43721 13.1469 3.96214 13.3219 4.39412 13.1086L7.48902 11.5938C8.06863 11.3094 8.74667 11.7305 8.74667 12.3812V26.25C8.74667 27.218 9.52859 28 10.4964 28H24.4946C25.4624 28 26.2444 27.218 26.2444 26.25V12.3758C26.2444 11.7305 26.9224 11.3039 27.502 11.5883L30.5969 13.1031C31.0289 13.3219 31.5538 13.1469 31.7725 12.7094L34.9057 6.45312C35.1244 6.02109 34.9494 5.49062 34.5175 5.27734Z"
                  fill="white" />
              </svg>
            </a>
          </li>
          <li class="app-fixed-list">
            <a href="index.php?pg=design" class="app-fixed-link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="31"
                height="31"
                viewBox="0 0 31 31"
                fill="none">
                <path
                  d="M18 15.5C18 16.8807 16.8807 18 15.5 18C14.1193 18 13 16.8807 13 15.5C13 14.1193 14.1193 13 15.5 13C16.8807 13 18 14.1193 18 15.5Z"
                  fill="white" />
                <circle cx="15.5" cy="15.5" r="2.5" fill="#46694F" />
                <path
                  d="M6.62767 14.7762L14.7759 6.62915L12.1047 3.95787L8.37018 7.69233C8.32565 7.73695 8.27275 7.77235 8.21452 7.7965C8.15629 7.82066 8.09387 7.83309 8.03082 7.83309C7.96778 7.83309 7.90536 7.82066 7.84713 7.7965C7.78889 7.77235 7.736 7.73695 7.69146 7.69233L7.01274 7.01361C6.82505 6.82592 6.82505 6.52198 7.01274 6.3349L10.7472 2.60044L8.71045 0.563075C7.96029 -0.187086 6.74452 -0.187086 5.99436 0.563075L0.562779 5.99463C-0.186781 6.74479 -0.187386 7.96055 0.562779 8.71071L6.62767 14.7762ZM30.148 7.70444C31.2838 6.5686 31.2832 4.72741 30.148 3.59157L27.4083 0.851878C26.2724 -0.283959 24.4306 -0.283959 23.2942 0.851878L20.5078 3.63759L27.3616 10.4914L30.148 7.70444ZM19.1377 5.00834L1.15552 22.988L0.019681 29.493C-0.1335 30.3703 0.63059 31.1344 1.50851 30.98L8.01417 29.8393L25.9915 11.8615L19.1377 5.00834ZM30.4374 22.2899L28.4006 20.2531L24.6661 23.9876C24.4784 24.1753 24.1745 24.1753 23.9874 23.9876L23.3087 23.3089C23.1216 23.1212 23.1216 22.8173 23.3087 22.6302L27.0432 18.8957L24.3707 16.2232L16.2224 24.3703L22.2897 30.4369C23.0399 31.1871 24.2556 31.1871 25.0058 30.4369L30.4374 25.006C31.1875 24.2558 31.1875 23.0401 30.4374 22.2899Z"
                  fill="white" />
              </svg>
            </a>
          </li>
          <li class="app-fixed-list">
            <a href="index.php?pg=login" class="app-fixed-link">
              <i class="fa fa-user-circle" aria-hidden="true"></i>
            </a>
          </li>
          <div class="selected-option-bg"></div>
        </ul>
      </div>
<div class="link-mobile">
        <a href="#">Trang ch·ªß </a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
        <a href="#">√Åo thun</a>
      </div>
      <!-- Login -->
      <section class="cart">
        <div class="container">
          <div class="cart-title-heading">Gi·ªè h√†ng c·ªßa b·∫°n</div>
          <div class="cart-main">
            <div class="cart-left">
              <!-- <div class="cart-box">
                <div class="cart-box-heading">
                  <div class="cart-box__info">Th√¥ng tin s·∫£n ph·∫©m</div>
                  <div class="cart-box__right">
                    <div class="cart-box__price">ƒê∆°n gi√°</div>
                    <div class="cart-box__quantity">S·ªë l∆∞·ª£ng</div>
                    <div class="cart-box__total">Th√†nh ti·ªÅn</div>
                  </div>
                </div>
              </div> -->
              <form id="cart-select-form" action="cart_select_checkout.php" method="post">
              <table class="cart-table">
              <thead>
                  <tr>
                    <th style="width:40px; text-align:center"><input type="checkbox" id="select-all"></th>
                    <th class="pro-info">Th√¥ng tin s·∫£n ph·∫©m</th>
                    <th>ƒê∆°n gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Th√†nh ti·ªÅn</th>
                  </tr>
              </thead>
                
                <tbody>
                  <?php
                    $html_cart='';
                    $tongtien=0;
                    $j=0;
                    if(isset($_SESSION['giohang']) && count($_SESSION['giohang'])>0){
                      foreach ($_SESSION['giohang'] as $item) {
                          extract($item);
                          if($product_design==0){
                            $html_cart.='<tr class="cart-product" data-cart-index="'.$j.'">
                            <td style="text-align:center"><input type="checkbox" class="select-item" name="selected[]" value="'.$j.'"></td>
                            <td>
                              <div class="pro-main">
                                <div class="pro-image">
                                  '.check_img($img).'
                                </div>
                                <div class="cart-body-auth">
                                  <div class="cart-body-title">'.$name.'</div>
                                  <div class="cart-body-size">'.$color.'/'.$size.'</div>
                                  <div class="detail-input pro-quantity-mobile">
                                    <button class="detail-input__minus tru" type="button">-</button>
                                    <input class="soluong" type="text" value='.$soluong.' data-index="'.$j.'" />
                                    <button class="detail-input__plus cong" type="button">+</button>
                                    <input class="index" type="hidden" value="'.$j.'">
                                <input class="price" type="hidden" value="'.$price.'">
                                  </div>
                                  <div class="cart-body-del">
                                  <a href="index.php?pg=cart&id='.$j.'" class="delete-item" data-cart-index="'.$j.'"><i class="fa fa-trash" aria-hidden="true"></i></a>
                                  </div>
                                </div>
                              </div>
                            </td>
                            <td class="pro-price">'.number_format($price,0,'',',').'ƒë</td>
                            <td class="pro-td-quantity">
                              <div class="detail-input pro-quantity">
                                <button class="detail-input__minus tru" type="button">-</button>
                                <input class="soluong" type="text" value='.$soluong.' data-index="'.$j.'" />
                                <button class="detail-input__plus cong" type="button">+</button>
                                <input class="index" type="hidden" value="'.$j.'">
                                <input class="price" type="hidden" value="'.$price.'">
                              </div>
                            </td>
                            <td class="pro-price-quantity">'.number_format(intval($price)*intval($soluong),0,'',',').'ƒë</td>
                          </tr>';
                          $tongtien+=intval($price)*intval($soluong);
                          $j++;
                          }else{
                            if($product_design==1){
                              $html_cart.='<tr class="cart-product" data-cart-index="'.$j.'">
                                <td style="text-align:center"><input type="checkbox" class="select-item" name="selected[]" value="'.$j.'"></td>
                                <td>
                                  <div class="pro-main">
                                    <div class="pro-image">
                                      '.check_img($img).'
                                      <img class="design-icon" src="view/layout/assets/images/design-icon.svg" alt="" />
                                    </div>
                                    <div class="cart-body-auth">
                                      <div class="cart-body-title">'.$name.'</div>
                                      <div class="cart-body-size">'.$color.'/'.$size.'</div>
                                      <div class="detail-input pro-quantity-mobile">
                                        <button class="detail-input__minus tru" type="button">-</button>
                                        <input class="soluong" type="text" value='.$soluong.' data-index="'.$j.'" />
                                        <button class="detail-input__plus cong" type="button">+</button>
                                        <input class="index" type="hidden" value="'.$j.'">
                                    <input class="price" type="hidden" value="'.$price.'">
                                      </div>
                                      <div class="cart-body-del">
                                      <a href="index.php?pg=cart&id='.$j.'" class="delete-item" data-cart-index="'.$j.'"><i class="fa fa-trash" aria-hidden="true"></i></a>
                                      </div>
                                    </div>
                                  </div>
                                </td>
                                <td class="pro-price">'.number_format($price,0,'',',').'ƒë</td>
                                <td class="pro-td-quantity">
                                  <div class="detail-input pro-quantity">
                                    <button class="detail-input__minus tru" type="button">-</button>
                                    <input class="soluong" type="text" value='.$soluong.' data-index="'.$j.'" />
                                    <button class="detail-input__plus cong" type="button">+</button>
                                    <input class="index" type="hidden" value="'.$j.'">
                                    <input class="price" type="hidden" value="'.$price.'">
                                  </div>
                                </td>
                                <td class="pro-price-quantity">'.number_format(intval($price)*intval($soluong),0,'',',').'ƒë</td>
                              </tr>';
                              $tongtien+=intval($price)*intval($soluong);
                              $j++;
                            }
                          }
                          
                      }
                    }
                    echo $html_cart;
                  ?>
                </tbody>
              </table>  
              </form>
              <?php
                
                  if(!isset($_SESSION['giohang']) || count($_SESSION['giohang'])==0){
                    echo '<img class="giohangtrong" src="view/layout/assets/images/giohangtrong.jpg" alt="">';
                  }
                
              ?>
              <div class="cart-auth">
                <div class="cart-auth-del">
                <a href="index.php?pg=cart&delcart=true"><button class="cart-auth-del__btn">X√≥a t·∫•t c·∫£</button></a>
                </div>
                <div class="cart-auth-continue">
                <a href="index.php?pg=product"><button class="cart-auth-continue__btn">Ti·∫øp t·ª•c mua h√†ng</button></a>
                </div>
              </div>
            </div>
            <div class="cart-right">
              <div class="cart-info">Th√¥ng tin ƒë∆°n h√†ng</div>
              <div class="cart-content">
                <div class="cart-content-price">
                  <div class="cart-content__text">T·ªïng ti·ªÅn</div>
                  <input class="tong" type="hidden" value=<?=$tongtien?>>
                  <div class="cart-content__price"><?=number_format($tongtien,0,'',',')?>ƒë</div>
                </div>
                <script>
        $(document).ready(function () {
            var tong=$('.tong').val();
      // Select all handler
      $('#select-all').on('change', function(){
        var checked = $(this).is(':checked');
        $('.select-item').prop('checked', checked);
      });
            $(".tru").click(function (e) { 
                e.preventDefault();
                var $btn = $(this);
                var $row = $btn.closest('.cart-product');
                var soluong = parseInt($btn.parent().find('.soluong').val());
                var soluongdau = soluong;
                soluong--;
                
                if(soluong < 0) soluong = 0;
                
                $btn.parent().find('.soluong').val(soluong);
                
                var ind = parseInt($btn.parent().find('.index').val());
                var price = parseInt($btn.parent().find('.price').val());
                
                if(soluong==0){
                    // X√≥a row n√†y
                    $row.remove();
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").remove();
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").remove();
                }else{
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").find("span").html(soluong);
                    // $(".fee-cart").find("h1:eq("+(ind*2+1)+")").find("span").html((soluong*price).toLocaleString("en-US", {style:"currency", currency:"USD"}));'
                    var thanhtienso=soluong*price;
                    var thanhtien='';
                    if(thanhtienso==0){
                        thanhtien='0ƒë';
                    }else{
                        while(thanhtienso>0){
                            if(thanhtienso>=1000000){
                                thanhtien+=Math.floor(thanhtienso/1000000)+',';
                                thanhtienso=thanhtienso-Math.floor(thanhtienso/1000000)*1000000;
                            }
                            if(thanhtienso>=1000){
                                thanhtien+=Math.floor(thanhtienso/1000)+',';
                                thanhtienso=thanhtienso-Math.floor(thanhtienso/1000)*1000;
                            }
                            if(thanhtienso<1000){
                                if(thanhtienso>0){
                                    thanhtien+=thanhtienso+'ƒë';
                                }else{
                                    thanhtien+='000ƒë';
                                }
                            }
                        }
                    }
                       
                    $row.find('.pro-price-quantity').html(thanhtien);
                }
                tong=parseInt(tong)-parseInt((soluongdau-soluong)*price);
                tong1=tong;
                var tongchuoi='';
                if(tong1==0){
                    tongchuoi='0ƒë';
                }else{
                    while(tong1>0){
                        if(tong1>=1000000){
                            tongchuoi+=Math.floor(tong1/1000000)+',';
                            tong1=tong1-Math.floor(tong1/1000000)*1000000;
                        }
                        if(tong1>=1000){
                            tongchuoi+=Math.floor(tong1/1000)+',';
                            tong1=tong1-Math.floor(tong1/1000)*1000;
                        }
                        if(tong1<1000){
                            if(tong1>0){
                                tongchuoi+=tong1+'ƒë';
                            }else{
                                tongchuoi+='000ƒë';
                            }
                        }
                    }
                }
                $(".cart-content__price").html(tongchuoi);

                // $(".fee-cart:eq(1)").find('span').html(tong.toLocaleString("en-US", {style:"currency", currency:"USD"}));
                // if(tong==0){
                //     $('.layout-cart').find('article').html(str);
                //     $('.layout-cart').find('aside').remove();
                // }
        // Update header cart badge after change
        var totalCount = 0;
        $(".soluong").each(function(){
          var v = parseInt($(this).val(), 10);
          if(!isNaN(v)) totalCount += v;
        });
        $(".cart-count").text(totalCount);

        // G·ª≠i request c·∫≠p nh·∫≠t l√™n server (kh√¥ng reload trang)
        $.post("index.php?pg=cart", {
                    soluongmoi: soluong,
                    ind: ind
                }).fail(function() {
                    console.error("L·ªói c·∫≠p nh·∫≠t gi·ªè h√†ng");
                });
            });
            $(".cong").click(function (e) { 
                e.preventDefault();
                var $btn = $(this);
                var $row = $btn.closest('.cart-product');
                var soluong = parseInt($btn.parent().find('.soluong').val());
                var soluongdau = soluong;
                soluong++;
                
                $btn.parent().find('.soluong').val(soluong);
                
                var ind = parseInt($btn.parent().find('.index').val());
                var price = parseInt($btn.parent().find('.price').val());
                
                if(soluong==0){
                    $row.remove();
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").remove();
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").remove();
                }else{
                    // $(".fee-cart").find("h1:eq("+(ind*2)+")").find("span").html(soluong);
                    // $(".fee-cart").find("h1:eq("+(ind*2+1)+")").find("span").html((soluong*price).toLocaleString("en-US", {style:"currency", currency:"USD"}));'
                    var thanhtienso=soluong*price;
                    var thanhtien='';
                    if(thanhtienso==0){
                        thanhtien='0ƒë';
                    }else{
                        while(thanhtienso>0){
                            if(thanhtienso>=1000000){
                                thanhtien+=Math.floor(thanhtienso/1000000)+',';
                                thanhtienso=thanhtienso-Math.floor(thanhtienso/1000000)*1000000;
                            }
                            if(thanhtienso>=1000){
                                thanhtien+=Math.floor(thanhtienso/1000)+',';
                                thanhtienso=thanhtienso-Math.floor(thanhtienso/1000)*1000;
                            }
                            if(thanhtienso<1000){
                                if(thanhtienso>0){
                                    thanhtien+=thanhtienso+'ƒë';
                                }else{
                                    thanhtien+='000ƒë';
                                }
                            }
                        }
                    }
                       
                    $row.find('.pro-price-quantity').html(thanhtien);
                }
                tong=parseInt(tong)+parseInt((soluong-soluongdau)*price);
                tong1=tong;
                var tongchuoi='';
                if(tong1==0){
                    tongchuoi='0ƒë';
                }else{
                    while(tong1>0){
                        if(tong1>=1000000){
                            tongchuoi+=Math.floor(tong1/1000000)+',';
                            tong1=tong1-Math.floor(tong1/1000000)*1000000;
                        }
                        if(tong1>=1000){
                            tongchuoi+=Math.floor(tong1/1000)+',';
                            tong1=tong1-Math.floor(tong1/1000)*1000;
                        }
                        if(tong1<1000){
                            if(tong1>0){
                                tongchuoi+=tong1+'ƒë';
                            }else{
                                tongchuoi+='000ƒë';
                            }
                        }
                    }
                }
                $(".cart-content__price").html(tongchuoi);

                // $(".fee-cart:eq(1)").find('span').html(tong.toLocaleString("en-US", {style:"currency", currency:"USD"}));
                // if(tong==0){
                //     $('.layout-cart').find('article').html(str);
                //     $('.layout-cart').find('aside').remove();
                // }
        // Update header cart badge after change
        var totalCount = 0;
        $(".soluong").each(function(){
          var v = parseInt($(this).val(), 10);
          if(!isNaN(v)) totalCount += v;
        });
        $(".cart-count").text(totalCount);

        // G·ª≠i request c·∫≠p nh·∫≠t l√™n server (kh√¥ng reload trang)
        $.post("index.php?pg=cart", {
                    soluongmoi: soluong,
                    ind: ind
                }).fail(function() {
                    console.error("L·ªói c·∫≠p nh·∫≠t gi·ªè h√†ng");
                });
            });

            // X·ª¨ L√ù KHI NG∆Ø·ªúI D√ôNG ƒêI·ªÄN TR·ª∞C TI·∫æP S·ªê L∆Ø·ª¢NG
            $(".soluong").on('blur change', function(e) {
                var $input = $(this);
                var $row = $input.closest('.cart-product');
                var soluongmoi = parseInt($input.val());
                var soluongcu = parseInt($input.data('prev-value') || $input.attr('value'));
                
                // Validate s·ªë l∆∞·ª£ng
                if(isNaN(soluongmoi) || soluongmoi < 0) {
                    soluongmoi = 1;
                    $input.val(1);
                }
                
                // N·∫øu kh√¥ng thay ƒë·ªïi th√¨ kh√¥ng l√†m g√¨
                if(soluongmoi === soluongcu) return;
                
                var ind = parseInt($input.attr('data-index'));
                var price = parseInt($input.parent().find('.price').val());
                
                console.log('Thay ƒë·ªïi s·ªë l∆∞·ª£ng:', {soluongcu: soluongcu, soluongmoi: soluongmoi, ind: ind, price: price});
                
                // N·∫øu s·ªë l∆∞·ª£ng = 0 th√¨ x√≥a s·∫£n ph·∫©m
                if(soluongmoi == 0) {
                    if(confirm('B·∫°n c√≥ mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh·ªèi gi·ªè h√†ng?')) {
                        $row.remove();
                        tong = parseInt(tong) - parseInt(soluongcu * price);
                    } else {
                        $input.val(soluongcu);
                        return;
                    }
                } else {
                    // C·∫≠p nh·∫≠t th√†nh ti·ªÅn
                    var thanhtienso = soluongmoi * price;
                    var thanhtien = '';
                    if(thanhtienso == 0) {
                        thanhtien = '0ƒë';
                    } else {
                        var temp = thanhtienso;
                        while(temp > 0) {
                            if(temp >= 1000000) {
                                thanhtien += Math.floor(temp/1000000) + ',';
                                temp = temp - Math.floor(temp/1000000) * 1000000;
                            } else if(temp >= 1000) {
                                thanhtien += Math.floor(temp/1000) + ',';
                                temp = temp - Math.floor(temp/1000) * 1000;
                            } else if(temp < 1000) {
                                if(temp > 0) {
                                    thanhtien += temp + 'ƒë';
                                } else {
                                    thanhtien += '000ƒë';
                                }
                                break;
                            }
                        }
                    }
                    $row.find('.pro-price-quantity').html(thanhtien);
                    
                    // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn
                    tong = parseInt(tong) + parseInt((soluongmoi - soluongcu) * price);
                }
                
                // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn hi·ªÉn th·ªã
                var tong1 = tong;
                var tongchuoi = '';
                if(tong1 == 0) {
                    tongchuoi = '0ƒë';
                } else {
                    while(tong1 > 0) {
                        if(tong1 >= 1000000) {
                            tongchuoi += Math.floor(tong1/1000000) + ',';
                            tong1 = tong1 - Math.floor(tong1/1000000) * 1000000;
                        } else if(tong1 >= 1000) {
                            tongchuoi += Math.floor(tong1/1000) + ',';
                            tong1 = tong1 - Math.floor(tong1/1000) * 1000;
                        } else if(tong1 < 1000) {
                            if(tong1 > 0) {
                                tongchuoi += tong1 + 'ƒë';
                            } else {
                                tongchuoi += '000ƒë';
                            }
                            break;
                        }
                    }
                }
                $(".cart-content__price").html(tongchuoi);
                
                // C·∫≠p nh·∫≠t cart count ·ªü header
                var totalCount = 0;
                $(".soluong").each(function(){
                    var v = parseInt($(this).val(), 10);
                    if(!isNaN(v)) totalCount += v;
                });
                $(".cart-count").text(totalCount);
                
                // L∆∞u gi√° tr·ªã m·ªõi
                $input.data('prev-value', soluongmoi);
                
                // G·ª≠i l√™n server (kh√¥ng reload trang)
                $.post("index.php?pg=cart", {
                    soluongmoi: soluongmoi,
                    ind: ind
                }).done(function(response) {
                    console.log("C·∫≠p nh·∫≠t th√†nh c√¥ng:", response);
                }).fail(function() {
                    console.error("L·ªói c·∫≠p nh·∫≠t gi·ªè h√†ng");
                    // N·∫øu l·ªói, reload trang ƒë·ªÉ ƒë·ªìng b·ªô l·∫°i
                    location.reload();
                });
            });
            
            // L∆∞u gi√° tr·ªã ban ƒë·∫ßu c·ªßa m·ªói input v√† ƒë·ªìng b·ªô 2 input (mobile + desktop)
            $(".soluong").each(function() {
                var val = parseInt($(this).val());
                $(this).data('prev-value', val);
            });
            
            // ƒê·ªìng b·ªô 2 input s·ªë l∆∞·ª£ng (mobile v√† desktop) khi thay ƒë·ªïi
            $(".soluong").on('input', function() {
                var $this = $(this);
                var newVal = $this.val();
                var cartIndex = $this.attr('data-index');
                
                // C·∫≠p nh·∫≠t input kh√°c c√πng s·∫£n ph·∫©m
                $('.soluong[data-index="'+cartIndex+'"]').not($this).val(newVal);
            });

            // ========== X√ìA 1 S·∫¢N PH·∫®M (ICON TH√ôNG R√ÅC) ==========
            $(document).on('click', '.delete-item', function(e){
              e.preventDefault();
              e.stopPropagation();
              
              console.log('üóëÔ∏è Click x√≥a s·∫£n ph·∫©m'); // Debug
              
              var $row = $(this).closest('.cart-product');
              if ($row.length === 0) {
                console.error('Kh√¥ng t√¨m th·∫•y .cart-product');
                return;
              }

              // L·∫•y index
              var ind = parseInt($row.attr('data-cart-index'), 10);
              if (isNaN(ind)) {
                ind = parseInt($row.find('.index').first().val(), 10);
              }
              console.log('Index:', ind); // Debug

              // HI·ªÜN TOAST NGAY L·∫¨P T·ª®C
              if (window.Toast) {
                Toast.success('ƒê√£ x√≥a kh·ªèi gi·ªè h√†ng');
              } else {
                console.error('Toast kh√¥ng t·ªìn t·∫°i!');
              }

              // X√≥a h√†ng kh·ªèi DOM ngay (ƒë·ªÉ user th·∫•y feedback)
              $row.fadeOut(300, function(){
                $(this).remove();
              });

              // G·ª≠i y√™u c·∫ßu x√≥a l√™n server v√† reload sau 800ms
              $.ajax({
                url: 'index.php?pg=cart',
                type: 'POST',
                data: { soluongmoi: 0, ind: ind },
                dataType: 'json',
                success: function(response){
                  console.log('‚úÖ X√≥a th√†nh c√¥ng tr√™n server:', response);
                  // Reload sau 800ms ƒë·ªÉ toast k·ªãp hi·ªÉn th·ªã
                  setTimeout(function(){ location.reload(); }, 800);
                },
                error: function(xhr, status, error){
                  console.error('‚ùå L·ªói x√≥a tr√™n server:', status, error);
                  // Reload ƒë·ªÉ ƒë·ªìng b·ªô
                  setTimeout(function(){ location.reload(); }, 800);
                }
              });
            });

            // ========== X√ìA T·∫§T C·∫¢ S·∫¢N PH·∫®M ==========
            $(document).on('click', '.cart-auth-del a', function(e){
              // Link m·∫∑c ƒë·ªãnh: index.php?pg=cart&delcart=true
              e.preventDefault();
              // X√≥a to√†n b·ªô c√°c d√≤ng s·∫£n ph·∫©m
              $('.cart-product').remove();
              tong = 0;
              $(".cart-content__price").html('0ƒë');
              $(".cart-count").text(0).addClass('updated');
              setTimeout(function(){ $('.cart-count').removeClass('updated'); }, 500);

              $.get('index.php?pg=cart&delcart=true')
                .done(function(){ if (window.Toast) Toast.success('ƒê√£ x√≥a t·∫•t c·∫£ s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng'); })
                .fail(function(){ if (window.Toast) Toast.error('Kh√¥ng th·ªÉ x√≥a t·∫•t c·∫£, s·∫Ω t·∫£i l·∫°i'); location.reload(); });
            });
        });
    </script>
                <div class="cart-item">
                  <div class="cart-sale">Gi·∫£m gi√°</div>
                  <span>√Åp d·ª•ng t·∫°i trang thanh to√°n</span>
                </div>
                <div class="cart-item">
                  <div class="cart-sale">Ph√≠ v·∫≠n chuy·ªÉn</div>
                  <span>ƒê∆∞·ª£c t√≠nh t·∫°i trang thanh to√°n</span>
                </div>
                <div class="detail-btn">
                  <a href="index.php?pg=checkout">
                    <button type="button" class="detail-button" title="Thanh to√°n t·∫•t c·∫£">Thanh to√°n t·∫•t c·∫£</button>
                  </a>
                </div>
                <div class="detail-btn" style="margin-top:8px">
                  <button type="submit" form="cart-select-form" class="detail-button">Thanh to√°n ƒë√£ ch·ªçn</button>
                </div>
                <div class="cart-checkout">
                  <p>H·ªó tr·ª£ thanh to√°n v·ªõi</p>
                  <div class="cart-checkout-icon">
                    <img src="view/layout/assets/images/visa.svg" alt="" />
                    <img src="view/layout/assets/images/napas.svg" alt="" />
                    <img src="view/layout/assets/images/zalopay-icon.svg" alt="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>